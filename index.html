<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AriLu Color Spa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@400;500;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
        }
        .hero-bg {
            /* --- IMAGEN DE FONDO FINAL Y CORRECTA --- */
            background-image: url('https://i.pinimg.com/originals/c5/60/66/c560660bbe5ae187de1009df0bcfb483.jpg');
            background-size: cover;
            background-position: center;
        }
        /* Custom brand colors from the logo */
        .bg-brand-pink { background-color: #F85A70; }
        .text-brand-pink { color: #F85A70; }
        .border-brand-pink { border-color: #F85A70; }
        .hover\:bg-brand-pink-dark:hover { background-color: #E04F63; }
        .hover\:text-brand-pink:hover { color: #F85A70; }
        .focus\:ring-brand-pink:focus {
            --tw-ring-color: #F85A70;
        }
        /* Custom font for the logo */
        .font-great-vibes { 
            font-family: 'Great Vibes', cursive; 
        }
        /* Spinner for loading state */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F85A70;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <!-- Header & Navigation -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3 grid grid-cols-3 items-center">
            <!-- Left Nav Links (Desktop) -->
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#services" class="text-stone-600 hover:text-brand-pink transition duration-300">Servicios</a>
                <a href="#about" class="text-stone-600 hover:text-brand-pink transition duration-300">Nosotros</a>
            </div>
            <!-- Empty div for mobile layout -->
            <div class="md:hidden"></div>

            <!-- Centered Logo -->
            <div class="flex justify-center">
                <a href="#" class="flex flex-col items-center leading-tight -mt-1">
                    <span class="font-great-vibes text-4xl text-brand-pink">AriLu</span>
                    <span class="text-xs font-semibold tracking-[0.2em] text-brand-pink/80 uppercase">color spa</span>
                </a>
            </div>

            <!-- Right Nav Links (Desktop) & Mobile Menu Button -->
            <div class="flex justify-end items-center">
                <div class="hidden md:flex space-x-6 items-center">
                    <a href="#gallery" class="text-stone-600 hover:text-brand-pink transition duration-300">Galería</a>
                    <a href="#contact" class="text-stone-600 hover:text-brand-pink transition duration-300">Contacto</a>
                    <a href="#contact" class="bg-brand-pink text-white px-6 py-2 rounded-full hover:bg-brand-pink-dark transition duration-300 shadow">Reserva Ahora</a>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-stone-800">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#services" class="block py-2 text-stone-600 hover:text-brand-pink">Servicios</a>
            <a href="#about" class="block py-2 text-stone-600 hover:text-brand-pink">Nosotros</a>
            <a href="#gallery" class="block py-2 text-stone-600 hover:text-brand-pink">Galería</a>
            <a href="#contact" class="block py-2 text-stone-600 hover:text-brand-pink">Contacto</a>
            <a href="#contact" class="block mt-4 bg-brand-pink text-white text-center px-6 py-2 rounded-full hover:bg-brand-pink-dark transition duration-300 shadow">Reserva Ahora</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-bg text-white">
        <div class="bg-black/50 min-h-[60vh] flex items-center">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-4">Donde el Color Cobra Vida.</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">Tu santuario para la relajación y el rejuvenecimiento. Descubre la mejor versión de ti misma.</p>
                <a href="#services" class="bg-brand-pink text-white px-8 py-4 rounded-full hover:bg-brand-pink-dark transition duration-300 text-lg font-semibold shadow-lg">Explora Nuestros Servicios</a>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12">Nuestros Servicios</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                <!-- Service Card 1 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-coloring.jpg" alt="Muestras de diferentes tintes de cabello" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Color y Tinte</h3>
                        <p class="text-stone-600 mb-4">Desde un balayage sutil hasta un cambio de color radical, nuestras expertas lo hacen realidad.</p>
                    </div>
                </div>
                <!-- Service Card 2 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-haircut.jpg" alt="Mujer con corte de cabello moderno" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Corte y Peinado</h3>
                        <p class="text-stone-600 mb-4">Creamos el look perfecto que resalta tu estilo, desde cortes modernos hasta peinados para eventos.</p>
                    </div>
                </div>
                <!-- Service Card 3 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-spa.jpg" alt="Tratamiento capilar" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Tratamientos Capilares</h3>
                        <p class="text-stone-600 mb-4">Devuélvele la vida a tu cabello con nuestros tratamientos de reparación e hidratación profunda.</p>
                    </div>
                </div>
                <!-- Service Card 4 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-nails.jpg" alt="Uñas con manicura profesional" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Manos y Pies</h3>
                        <p class="text-stone-600 mb-4">Consiéntete con nuestros servicios de manicura y pedicura, con esmaltado clásico, gel o acrílico.</p>
                    </div>
                </div>
                <!-- Service Card 5 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-makeup.jpg" alt="Maquillaje profesional" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Rostro y Maquillaje</h3>
                        <p class="text-stone-600 mb-4">Define tu mirada con nuestro diseño de cejas y luce espectacular con un maquillaje profesional.</p>
                    </div>
                </div>
                <!-- Service Card 6 -->
                <div class="bg-stone-50 rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300">
                    <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/service-products.jpg" alt="Productos de belleza" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-2xl font-bold mb-2">Productos de Belleza</h3>
                        <p class="text-stone-600 mb-4">Llévate a casa los mejores productos profesionales para continuar tu rutina de cuidado y belleza.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Stylist Section -->
    <section id="ai-stylist" class="py-20 bg-stone-50">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-4">✨ Asesor de Estilo Virtual</h2>
            <p class="text-stone-600 mb-10 max-w-2xl mx-auto">¿No sabes qué hacerte? Describe tu cabello y la ocasión, y nuestra IA te dará una recomendación de look al instante.</p>
            
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg text-left">
                <form id="stylist-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="hair-length" class="block text-sm font-medium text-stone-700 mb-1">Largo de tu cabello</label>
                            <select id="hair-length" class="w-full p-3 rounded-md border border-stone-300 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                                <option>Corto</option>
                                <option>Mediano</option>
                                <option>Largo</option>
                            </select>
                        </div>
                        <div>
                            <label for="hair-type" class="block text-sm font-medium text-stone-700 mb-1">Tipo de tu cabello</label>
                            <select id="hair-type" class="w-full p-3 rounded-md border border-stone-300 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                                <option>Liso</option>
                                <option>Ondulado</option>
                                <option>Rizado</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-6">
                        <label for="occasion" class="block text-sm font-medium text-stone-700 mb-1">Describe la ocasión o evento</label>
                        <input type="text" id="occasion" placeholder="Ej: una boda, fiesta de noche, día casual..." class="w-full p-3 rounded-md border border-stone-300 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                    </div>
                    <div class="mb-8">
                        <label for="style-preference" class="block text-sm font-medium text-stone-700 mb-1">¿Cuál es tu estilo personal?</label>
                        <input type="text" id="style-preference" placeholder="Ej: moderno, clásico, atrevido, natural..." class="w-full p-3 rounded-md border border-stone-300 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                    </div>
                    <button id="get-recommendation-btn" type="submit" class="w-full bg-brand-pink text-white px-6 py-3 rounded-full hover:bg-brand-pink-dark transition duration-300 shadow-md font-semibold text-lg flex items-center justify-center">
                        ✨ Recomiéndame un Look
                    </button>
                </form>

                <!-- Result Area -->
                <div id="loading-spinner" class="hidden mt-8">
                    <div class="loader"></div>
                    <p class="text-center text-stone-600">Nuestra estilista IA está pensando...</p>
                </div>
                <div id="recommendation-result" class="hidden mt-8 p-6 bg-rose-50 border border-brand-pink rounded-lg">
                    <h3 class="text-2xl font-bold mb-3 text-brand-pink">¡Tu Look Ideal!</h3>
                    <p id="result-text" class="text-stone-700 whitespace-pre-wrap"></p>
                </div>
                 <div id="error-message" class="hidden mt-8 p-6 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                    <h3 class="text-xl font-bold mb-2">¡Oh, no!</h3>
                    <p id="error-text"></p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about" class="py-20 bg-white">
        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
            <div class="md:w-1/2">
                <img src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/team-about-us.jpg" alt="Equipo de estilistas profesionales sonriendo" class="rounded-lg shadow-xl h-full w-full object-cover">
            </div>
            <div class="md:w-1/2 text-center md:text-left">
                <h2 class="text-4xl font-bold mb-6">Bienvenida a AriLu Color Spa</h2>
                <p class="text-stone-600 mb-4 leading-relaxed">Fundado en 2010, AriLu Color Spa ha sido un refugio de paz y estilo. Nuestra misión es brindar una experiencia de salón inigualable, combinando experiencia técnica con un ambiente relajante. Nuestro equipo de profesionales dedicados se apasiona por hacer que cada cliente se sienta bella, segura y cuidada.</p>
                <p class="text-stone-600 leading-relaxed">Utilizamos solo productos sostenibles de la más alta calidad para garantizar los mejores resultados para ti y para el medio ambiente.</p>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="py-20 bg-stone-50">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12">Nuestro Trabajo</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="grid gap-4">
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery1.jpg" alt="Peinado elegante para mujer"></div>
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery2.jpg" alt="Manicura profesional con diseño"></div>
                </div>
                <div class="grid gap-4">
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery3.jpg" alt="Mujer con cabello rubio peinado"></div>
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery4.jpg" alt="Proceso de coloración de cabello"></div>
                </div>
                <div class="grid gap-4">
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery5.jpg" alt="Peinado con ondas suaves"></div>
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery6.jpg" alt="Tratamiento de spa para manos"></div>
                </div>
                <div class="grid gap-4">
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery7.jpg" alt="Mujer sonriendo con nuevo corte de cabello"></div>
                    <div><img class="h-auto max-w-full rounded-lg shadow-md" src="https://raw.githubusercontent.com/google-gemini/gemini-codelab-innovator-workshop/main/images/salon/gallery8.jpg" alt="Productos de belleza y spa"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl font-bold text-center mb-12">Ponte en Contacto</h2>
            <div class="flex flex-col lg:flex-row gap-12">
                <!-- Contact Form -->
                <div class="lg:w-2/3 bg-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-2xl font-bold mb-6">Reserva una Cita</h3>
                    <form>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <input type="text" placeholder="Tu Nombre" class="w-full p-3 rounded-md border border-stone-200 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                            <input type="email" placeholder="Tu Correo Electrónico" class="w-full p-3 rounded-md border border-stone-200 focus:outline-none focus:ring-2 focus:ring-brand-pink">
                        </div>
                        <div class="mb-6">
                            <select class="w-full p-3 rounded-md border border-stone-200 bg-white focus:outline-none focus:ring-2 focus:ring-brand-pink">
                                <option>Selecciona un Servicio</option>
                                <option>Color y Tinte</option>
                                <option>Corte y Peinado</option>
                                <option>Tratamientos Capilares</option>
                                <option>Manos y Pies</option>
                                <option>Rostro y Maquillaje</option>
                                <option>Comprar Productos</option>
                            </select>
                        </div>
                        <div class="mb-6">
                            <textarea placeholder="Tu Mensaje" rows="5" class="w-full p-3 rounded-md border border-stone-200 focus:outline-none focus:ring-2 focus:ring-brand-pink"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-brand-pink text-white px-6 py-3 rounded-full hover:bg-brand-pink-dark transition duration-300 shadow-md font-semibold">Enviar Mensaje</button>
                    </form>
                </div>
                <!-- Contact Info -->
                <div class="lg:w-1/3 bg-brand-pink text-white p-8 rounded-lg shadow-lg flex flex-col justify-between">
                    <div>
                        <h3 class="text-2xl font-bold mb-6">Información de Contacto</h3>
                        <div class="space-y-4">
                            <p class="flex items-start">
                                <svg class="w-6 h-6 mr-3 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                <span>Av. Belleza 123, Ciudad Serena, 12345</span>
                            </p>
                            <p class="flex items-center">
                                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                <span>(123) 456-7890</span>
                            </p>
                            <p class="flex items-center">
                                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                <span>contacto@arilucolorspa.com</span>
                            </p>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold mt-8 mb-2">Horario de Atención</h4>
                        <p>Lun - Vie: 9:00 AM - 7:00 PM</p>
                        <p>Sábado: 10:00 AM - 6:00 PM</p>
                        <p>Domingo: Cerrado</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-stone-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="#" class="hover:text-brand-pink transition duration-300">Facebook</a>
                <a href="#" class="hover:text-brand-pink transition duration-300">Instagram</a>
                <a href="#" class="hover:text-brand-pink transition duration-300">Twitter</a>
            </div>
            <p>&copy; 2025 AriLu Color Spa. Todos los Derechos Reservados.</p>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when a link is clicked
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Gemini AI Stylist Logic
        const stylistForm = document.getElementById('stylist-form');
        const getRecommendationBtn = document.getElementById('get-recommendation-btn');
        const loadingSpinner = document.getElementById('loading-spinner');
        const recommendationResult = document.getElementById('recommendation-result');
        const resultText = document.getElementById('result-text');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        stylistForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            // Show loader and hide previous results/errors
            loadingSpinner.classList.remove('hidden');
            recommendationResult.classList.add('hidden');
            errorMessage.classList.add('hidden');
            getRecommendationBtn.disabled = true;

            // Get form values
            const hairLength = document.getElementById('hair-length').value;
            const hairType = document.getElementById('hair-type').value;
            const occasion = document.getElementById('occasion').value;
            const stylePreference = document.getElementById('style-preference').value;

            // Construct the prompt for the Gemini API
            const prompt = `Actúa como un estilista experto en un salón de belleza de lujo en Perú llamado "AriLu Color Spa". Un cliente te pide una recomendación. Los servicios que ofreces son: Color y Tinte, Corte y Peinado, Tratamientos Capilares de reparación, Manicura y Pedicura (con esmaltado clásico, gel y acrílico), Diseño de Cejas y Maquillaje profesional.
            - Largo del cabello del cliente: ${hairLength}
            - Tipo de cabello: ${hairType}
            - Ocasión para el look: ${occasion}
            - Estilo personal del cliente: ${stylePreference}
            
            Basado en esta información, sugiérele un peinado y un tratamiento de color específicos. Describe el look de forma atractiva y emocionante, explicando por qué le quedaría bien. La respuesta debe ser amigable, profesional y animar al cliente a reservar una cita en AriLu Color Spa. La respuesta debe estar en español peruano.`;

            try {
                // Call the Gemini API
                const apiKey = ""; // API key is handled by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: prompt }]
                    }]
                };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Error de la API: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    resultText.textContent = generatedText;
                    recommendationResult.classList.remove('hidden');
                } else {
                    throw new Error("No se pudo obtener una recomendación. La respuesta de la IA estaba vacía.");
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                errorText.textContent = `Hubo un problema al contactar a nuestra estilista IA. Por favor, inténtalo de nuevo más tarde. Detalles: ${error.message}`;
                errorMessage.classList.remove('hidden');
            } finally {
                // Hide loader and re-enable button
                loadingSpinner.classList.add('hidden');
                getRecommendationBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
